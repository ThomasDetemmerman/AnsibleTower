<h1>This webpage is created using Ansible</h1>
<h3>hostname: {{ ansible_hostname }}</h3>
<p>
{{ groupname }}
{{ startport }}{{ endport }}
{% for member in  groups['web'] %}

server.{{ hostvars[member]['myid'] }}={{ hostvars[member]['ansible_hostname'] }}:
{% if  {{ hostvars[member]['startport'] }} is defined%}
{{ hostvars[member]['startport'] }}
{% else %}
{{ startport }}
{% endif %}
:
{% if  {{ hostvars[member]['endport'] }} is defined%}
{{ hostvars[member]['endport'] }}
{% else %}
{{ endport }}
{% endif %}
{% endfor %}

 {#
Het lijkt misschien een beetje raar om gebruik te maken van deze if-else structuur.
De reden hiervoor is dat als een host de variable default waarde voor bv startport overschrijft, dan kunnen enkel
de andere hosts hieraan via het gebruik van fact var's (hostvars[member]['endport']), echter als deze host
deze variable niet overschrijft bestaat deze fact var NIET en krijg je een undifined variabele. Daarom wordt er
de 'else' gebruikt om de default waarde te gebruiken.
  #}


</p>


<?php
error_reporting(E_ALL);
ini_set('display_errors', 'On');



echo "Current PHP version:" . phpversion()." <br>";
echo "--> <font color=\"green\"><b> php is working</font> </b><br><br>";
echo"Test mysqli is installed and working...<br>";
if (!function_exists('mysqli_init') && !extension_loaded('mysqli')) {
    echo "<font color=\"red\">--> mysqli not supported!!!</font><br><br>";
} else {
    echo "--> <font color=\"green\"><b>mysqli supported </b></font><br><br>";
}
echo "Trying to make a connection to database... (default: localhost | name: root | no password)<br>";
$servername = "localhost";
$username = "root";
// Create connection
$conn = new mysqli($servername, $username);
// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
echo "<font color=\"green\">--><b>  Connected successfully</b><br></font>";
phpinfo();
